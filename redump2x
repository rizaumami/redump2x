#!/usr/bin/env bash
set -euo pipefail
IFS=$'\n\t'

# LICENSE ----------------------------------------------------------------------
#
# This is free and unencumbered software released into the public domain.
#
# Anyone is free to copy, modify, publish, use, compile, sell, or
# distribute this software, either in source code form or as a compiled
# binary, for any purpose, commercial or non-commercial, and by any
# means.
#
# In jurisdictions that recognize copyright laws, the author or authors
# of this software dedicate any and all copyright interest in the
# software to the public domain. We make this dedication for the benefit
# of the public at large and to the detriment of our heirs and
# successors. We intend this dedication to be an overt act of
# relinquishment in perpetuity of all present and future rights to this
# software under copyright law.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
# IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR
# OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
# ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
# OTHER DEALINGS IN THE SOFTWARE.
#
# For more information, please refer to <http://unlicense.org>
#
# ------------------------------------------------------------------------------

# Get the current working directory.
HERE=$(dirname "$(readlink -f "${0}")")

# Checking dependencies:
# 1.  extract xiso: https://github.com/XboxDev/extract-xiso
#     - Use 32 build as 64 build is created problematic ISO's:
#       https://github.com/XboxDev/extract-xiso/issues/29
# 2.  7z, grep, xxd
#     sudo apt install p7zip-full grep xxd
# 3.  attach.xbe
#     Get it from driveimageutils-v1.0.1 package from "the usual place".
# 4.  xbfuse: https://github.com/multimediamike/xbfuse
declare -a DEPS=(7z 'attach.xbe' dd extract-xiso grep xbfuse xxd)
for ((NUM=${#DEPS[@]},i=0; i<NUM;i++)); do
  if command -v "${DEPS[i]}" &>/dev/null || [[ -f $HERE/bin/${DEPS[i]} ]]; then
    unset -v 'DEPS[i]'
  fi
done

# Exit if dependency not found.
if [[ "${#DEPS[@]}" -gt 0 ]]; then
  printf '\e[31m!! %s\n\e[m' 'Package(s) not found'
  printf '   - %s\n' "${DEPS[@]}"
  exit 1
fi

# VARIABLES --------------------------------------------------------------------

# Most redump distributed as archive. But let assume it's not.
ARCHIVE=false
ARTWORKS="$HERE/bin/artworks.7z"
# Launching xiso from ogxbox's disk need virtual disc attacher.
# Let assume we just want to extract the xiso.
ATTACH=false
EXISO="$HERE/bin/extract-xiso"
# extract-xiso arguments.
# Rewrite xiso (-r) used here as it's convert xiso on the fly.
EXISOARGS=('-rm')
# Is there artwork for the game?
NOART=false
# Where to look for input. Default to user's home directory.
INPUT="$HOME"
# Install artworks.
INSTART=false
# Join splitted xisos.
JOIN=false
OUTPUT="$HOME"
# Prevent nested output.
OUTARG="$HOME"
# Assume the redump archive is not password protected.
PASS=false
# Delete the input file after processing.
REMIN=false
# Splitted xiso only needed if it's mean to be transfered into ogxbox.
SPLIT=0
# Title ID -> Title Name. Taken from Repackinator.
declare -A TITLENAME=(
  ["434D0002"]="Pro Race Driver (USA)"
  ["53450027"]="Puyo Pop Fever (JPN)"
  ["4B4E001D"]="Dancing Stage Unleashed (PAL)"
  ["4143000C"]="Urban Freestyle Soccer (USA)"
  ["4B4E0021"]="Dance Dance Revolution Ultramix 2 (PAL)"
  ["4B4E0029"]="Dance Dance Revolution Ultramix 3 (PAL)"
  ["4541000D"]="007 - Agent Under Fire (USA)"
  ["45410042"]="007 - Everything Or Nothing (USA)"
  ["45410079"]="007 - From Russia With Love (USA)"
  ["45410026"]="007 - Nightfire (USA)"
  ["55530036"]="187 - Ride Or Die (GLO)"
  ["4541000B"]="2002 Fifa World Cup (USA)"
  ["45530018"]="25 To Life (USA-JPN)"
  ["54540001"]="4X4 Evo 2 (USA)"
  ["56550042"]="50 Cent - Bulletproof (GLO)"
  ["4D4A0009"]="Advent Rising (USA)"
  ["4D4A0014"]="Aeon Flux (USA-JPN)"
  ["4143000D"]="AFL Live 2003 (PAL)"
  ["4143001B"]="AFL Live 2004 (PAL)"
  ["41430023"]="AFL Live Premiership Edition (PAL)"
  ["54510101"]="AFL Premiership (PAL)"
  ["41430007"]="Aggressive Inline (USA)"
  ["4B4E0002"]="Airforce Delta Storm (USA)"
  ["41430016"]="Alias (USA)"
  ["5A440004"]="Alien Hominid (PAL)"
  ["56550022"]="Aliens Vs Predator - Extinction (USA)"
  ["41430002"]="All-Star Baseball 2003 Ft D.J (USA)"
  ["41430018"]="All-Star Baseball 2004 Ft D.J (USA)"
  ["4143001C"]="All-Star Baseball 2005 Ft D.J (USA)"
  ["5451000F"]="Alter Echo (USA)"
  ["55530043"]="America's Army - Rise Of A Soldier (USA)"
  ["4156003D"]="American Chopper (GLO)"
  ["4156004F"]="American Chopper 2 - Full Throttle (GLO)"
  ["454C0001"]="American Mcgee Presents Scrapland (GLO)"
  ["42530009"]="AMF Bowling 2004 (USA)"
  ["42530014"]="AMF Xtreme Bowling 2006 (USA)"
  ["4D530005"]="Amped - Freestyle Snowboarding (USA)"
  ["4D530041"]="Amped 2 (USA)"
  ["55530056"]="And 1 Streetball (GLO)"
  ["53550007"]="Angelic Concert (JPN)"
  ["494F0003"]="Animaniacs - The Great Edgar Hunt (PAL)"
  ["56550009"]="Antz Extreme Racing (USA)"
  ["494C0006"]="Aoi Namida (JPN)"
  ["49470015"]="Apex (USA)"
  ["544D0003"]="Aquaman - Battle For Atlantis (USA)"
  ["4D570002"]="Arctic Thunder (USA)"
  ["4D570005"]="Area 51 (USA)"
  ["45410094"]="Arena Football (USA)"
  ["4C41000D"]="Armed And Dangerous (USA)"
  ["54540088"]="Army Men - Major Malfunction (GLO)"
  ["54540014"]="Army Men - Sarge's War (USA)"
  ["44430002"]="Arx Fatalis (USA-PAL)"
  ["49470079"]="Atari Anthology (GLO)"
  ["4143000A"]="Atv - Quad Power Racing 2 (USA)"
  ["4343000E"]="Auto Modellista (GLO)"
  ["54510105"]="Avatar - The Last Airbender (USA-JPN)"
  ["4D530007"]="Azurik - Rise Of Perathia (USA)"
  ["56550049"]="B.P.S - Trophy Bass 2007 (GLO)"
  ["56550048"]="B.P.S - Trophy Hunter 2007 (GLO)"
  ["4553000D"]="Backyard Wrestling - D.T.T.A.H (USA-JPN)"
  ["45530016"]="Backyard Wrestling 2 - T.G.T.N (USA-JPN)"
  ["454D0016"]="Bad Boys - Miami Takedown (USA)"
  ["454D0008"]="Bad Boys II (PAL)"
  ["4950000A"]="Baldur's Gate - D.A II (USA-JPN)"
  ["5655001A"]="Baldur's Gate - Dark Alliance (USA)"
  ["54530002"]="Barbarian (PAL)"
  ["5655002A"]="Barbie Horse Adventures - W.H (USA-JPN)"
  ["4B420001"]="Batman - Dark Tomorrow (USA)"
  ["5553001C"]="Batman - Rise Of Sin Tzu (USA-JPN)"
  ["55530001"]="Batman - Vengeance (USA)"
  ["45410389"]="Batman Begins (USA)"
  ["49470010"]="Battle Engine Aquila (USA)"
  ["45410062"]="Battlefield 2 - Modern Combat (USA)"
  ["5655000F"]="Battlestar Galactica (USA-JPN)"
  ["43430015"]="Beat Down - Fists Of Vengeance (USA)"
  ["55530018"]="Beyond Good & Evil (USA-JPN)"
  ["41560040"]="Bicycle Casino Inc - Texas Hold'em (GLO)"
  ["4D5300D2"]="Big Bumpin' (USA)"
  ["454D0002"]="Big Mutha Truckers (USA)"
  ["454D0017"]="Big Mutha Truckers 2 (USA-JPN)"
  ["45410039"]="Bionicle (USA)"
  ["53550001"]="Bistro Cupid (JPN)"
  ["53550008"]="Bistro Cupid 2 (JPN)"
  ["45410083"]="Black (USA)"
  ["58490004"]="Black Stone - Magic & Steel (USA-PAL)"
  ["41560005"]="Blade II (USA)"
  ["55530057"]="Blazing Angels - Squadrons Of WwII (GLO)"
  ["4D530013"]="Blinx - The Time Sweeper (USA)"
  ["4D530065"]="Blinx 2 - Masters Of Time & Space (GLO)"
  ["4D570026"]="Blitz - The League (USA)"
  ["45530006"]="Blood Omen 2 - T.L.O.K.S (USA)"
  ["4D530010"]="Blood Wake (USA)"
  ["4D4A0001"]="Bloodrayne (USA)"
  ["4D4A000D"]="Bloodrayne 2 (USA)"
  ["48550001"]="Bloody Roar - Extreme (USA)"
  ["4D4A0008"]="Blowout (USA)"
  ["4143000E"]="Bmx Xxx (USA)"
  ["494C0002"]="Braveknight - Leverant Eiyuuden (JPN)"
  ["41530001"]="Break Nine - World Billiards (JPN)"
  ["4E4D0009"]="Breakdown (USA)"
  ["42530012"]="Breeders' Cup - W.T.C (USA)"
  ["434D004E"]="Brian Lara Int'l Cricket 2005 (PAL)"
  ["5451001D"]="Broken Sword - The Sleeping Dragon (USA)"
  ["5553005A"]="Brothers In Arms - Earned In Blood (GLO)"
  ["5553003C"]="Brothers In Arms - Road To Hill 30 (GLO)"
  ["56550016"]="Bruce Lee - Quest Of The Dragon (USA)"
  ["4D53001E"]="Brute Force (USA)"
  ["56550005"]="Buffy T.V.S - Chaos Bleeds (USA-JPN)"
  ["45410012"]="Buffy The Vampire Slayer (USA)"
  ["41430006"]="Burnout (USA)"
  ["41430019"]="Burnout 2 - Point Of Impact (USA)"
  ["4541005B"]="Burnout 3 - Takedown (USA)"
  ["45410076"]="Burnout Revenge (USA)"
  ["4D450001"]="C.A.T - Cyber Attack Team (JPN)"
  ["48500002"]="C.T Special Forces - F.F.E (GLO)"
  ["4156003E"]="Cabela's Big Game Hunter 2005 Adv (GLO)"
  ["41560019"]="Cabela's Dangerous Hunts (USA)"
  ["41560052"]="Cabela's Dangerous Hunts 2 (GLO)"
  ["41560030"]="Cabela's Deer Hunt - 2004 Season (USA)"
  ["4156003F"]="Cabela's Deer Hunt - 2005 Season (GLO)"
  ["4156004D"]="Cabela's Outdoor Adventures (GLO)"
  ["42530007"]="Call Of Cthulhu - D.C.O.T.E (USA)"
  ["4156002A"]="Call Of Duty - Finest Hour (GLO)"
  ["41560051"]="Call Of Duty 2 - Big Red One C.E (GLO)"
  ["4156005D"]="Call Of Duty 3 (GLO)"
  ["43430018"]="Capcom Classics Coll Vol. 1 (GLO)"
  ["43430019"]="Capcom Classics Coll Vol. 2 (USA-JPN)"
  ["43430010"]="Capcom Fighting Jam (GLO)"
  ["43430008"]="Capcom Vs. Snk 2 Eo (USA)"
  ["424D0006"]="Carmen Sandiego - T.S.O.T.S.D (USA)"
  ["545100F2"]="Cars (USA-JPN)"
  ["54540010"]="Carve (USA-PAL)"
  ["4B4E002D"]="Castlevania - C.O.D (USA-JPN)"
  ["4541005C"]="Catwoman (USA)"
  ["45410011"]="Cel Damage (USA)"
  ["584D0003"]="Championship Bowling (USA)"
  ["45530002"]="Championship Manager - S 01-02 (PAL)"
  ["4553000C"]="Championship Manager - S 02-03 (PAL)"
  ["53430100"]="Championship Manager 2006 (PAL)"
  ["4553001A"]="Championship Manager 5 (PAL)"
  ["54540081"]="Charlie And The Chocolate Factory (USA)"
  ["424D0001"]="Chase - Hollywood Stunt Driver (USA)"
  ["55530039"]="Chessmaster (USA)"
  ["4B420005"]="Chicago Enforcer (USA)"
  ["42560002"]="Chicken Little (GLO)"
  ["45430001"]="Circus Maximus - Chariot Wars (USA)"
  ["5454007D"]="Classified - The Sentinel Crisis (GLO)"
  ["54540012"]="Close Combat - First To Fight (USA)"
  ["434D000C"]="Club Football - Ac Milan (PAL)"
  ["434D0012"]="Club Football - Ajax Amsterdam (PAL)"
  ["434D0013"]="Club Football - Arsenal (PAL)"
  ["434D0014"]="Club Football - Aston Villa (PAL)"
  ["434D0017"]="Club Football - Borussia Dortmund (PAL)"
  ["434D0018"]="Club Football - Celtic FC (PAL)"
  ["434D0019"]="Club Football - Chelsea FC (PAL)"
  ["434D0015"]="Club Football - FC Barcelona (PAL)"
  ["434D0016"]="Club Football - FC Bayern Muenchen (PAL)"
  ["434D001B"]="Club Football - FC Internazionale (PAL)"
  ["434D0023"]="Club Football - Hamburger Sv (PAL)"
  ["434D001C"]="Club Football - Juventus (PAL)"
  ["434D001D"]="Club Football - Leeds United (PAL)"
  ["434D001E"]="Club Football - Liverpool FC (PAL)"
  ["434D0020"]="Club Football - Manchester United (PAL)"
  ["434D0021"]="Club Football - Rangers FC (PAL)"
  ["434D0022"]="Club Football - Real Madrid (PAL)"
  ["434D003A"]="Club Football 2005 - Ac Milan (PAL)"
  ["434D0039"]="Club Football 2005 - AFC Ajax (PAL)"
  ["434D0031"]="Club Football 2005 - Arsenal (PAL)"
  ["434D0033"]="Club Football 2005 - Aston Villa (PAL)"
  ["434D0041"]="Club Football 2005 - Birmingham (PAL)"
  ["434D003F"]="Club Football 2005 - Bvb (PAL)"
  ["434D0035"]="Club Football 2005 - Celtic FC (PAL)"
  ["434D0032"]="Club Football 2005 - Chelsea FC (PAL)"
  ["434D0038"]="Club Football 2005 - FC Barcelona (PAL)"
  ["434D003E"]="Club Football 2005 - FC Bayern (PAL)"
  ["434D003B"]="Club Football 2005 - FC Inter (PAL)"
  ["434D003D"]="Club Football 2005 - Hamburger Sv (PAL)"
  ["434D003C"]="Club Football 2005 - Juventus (PAL)"
  ["434D0030"]="Club Football 2005 - Liverpool FC (PAL)"
  ["434D002F"]="Club Football 2005 - Man Utd (PAL)"
  ["434D0044"]="Club Football 2005 - Marseille (PAL)"
  ["434D0040"]="Club Football 2005 - Newcastle Utd (PAL)"
  ["434D0043"]="Club Football 2005 - Psg (PAL)"
  ["434D0036"]="Club Football 2005 - Rangers FC (PAL)"
  ["434D0037"]="Club Football 2005 - Real Madrid (PAL)"
  ["434D0042"]="Club Football 2005 - Tottenham (PAL)"
  ["5454008A"]="Codename - Kids Next Door (USA)"
  ["5553004B"]="Cold Fear (GLO)"
  ["44430004"]="Cold War (USA)"
  ["434D0010"]="Colin McRae Rally 04 (USA)"
  ["434D002B"]="Colin McRae Rally 2005 (USA)"
  ["434D0001"]="Colin McRae Rally 3 (USA)"
  ["54540091"]="College Hoops 2K6 (USA)"
  ["545400AF"]="College Hoops 2K7 (USA)"
  ["47560003"]="Combat - Task Force 121 (USA)"
  ["53500001"]="Combat Elite - WwII Paratroopers (USA)"
  ["534300F9"]="Commandos - Strike Force (GLO)"
  ["45530008"]="Commandos 2 - Men Of Courage (USA)"
  ["544D0008"]="Conan (PAL)"
  ["54540005"]="Conflict - Desert Storm (USA)"
  ["53430006"]="Conflict - Desert Storm II (USA)"
  ["5343000C"]="Conflict - Global Terror (USA)"
  ["5343000A"]="Conflict - Vietnam (USA)"
  ["4D530051"]="Conker - Live & Reloaded (USA)"
  ["4F580001"]="Conspiracy - W.O.M.D (PAL)"
  ["5343000F"]="Constantine (USA-JPN)"
  ["544D000B"]="Corvette (USA)"
  ["4D530036"]="Counter-Strike (USA-JPN)"
  ["45530014"]="Crash 'N' Burn (GLO)"
  ["52410006"]="Crash (PAL)"
  ["56550003"]="Crash Bandicoot - T.W.O.C (USA)"
  ["5655001F"]="Crash Nitro Kart (USA-JPN)"
  ["56550041"]="Crash Tag Team Racing (GLO)"
  ["56550036"]="Crash Twinsanity (GLO)"
  ["53450004"]="Crazy Taxi 3 - High Roller (USA)"
  ["45410074"]="Cricket 2005 (PAL)"
  ["4B4E001C"]="Crime Life - Gang Wars (USA)"
  ["4B4F0002"]="Crimson Sea (USA)"
  ["4D530021"]="Crimson Skies - H.R.T.R (USA)"
  ["55530020"]="Crouching Tiger Hidden Dragon (USA-JPN)"
  ["464C0002"]="Crusty Demons (USA)"
  ["5553003F"]="Csi - Crime Scene Investigation (GLO)"
  ["4E4D0019"]="Curious George (USA)"
  ["57450005"]="Curse - The Eye Of Isis (USA)"
  ["54430007"]="D.O.A Xtreme Beach Volleyball (USA)"
  ["434B0001"]="Dai Senryaku VII - M.M.T (USA)"
  ["41430017"]="Dakar 2 - T.W.U.R (USA)"
  ["4B4E0019"]="Dance Dance Revolution Ultramix (USA)"
  ["4B4E0021"]="Dance Dance Revolution Ultramix 2 (USA)"
  ["4B4E0029"]="Dance Dance Revolution Ultramix 3 (USA)"
  ["4B4E0037"]="Dance Dance Revolution Ultramix 4 (USA)"
  ["42420002"]="Dance-Uk (PAL)"
  ["54510004"]="Dark Summit (USA)"
  ["43430016"]="Darkwatch (USA)"
  ["41430001"]="Dave Mirra Freestyle Bmx 2 (USA)"
  ["52410003"]="David Beckham Soccer (PAL)"
  ["49470027"]="Dead Man's Hand (USA-JPN)"
  ["54430006"]="Dead Or Alive 1 Ultimate (USA-JPN)"
  ["54430006"]="Dead Or Alive 2 Ultimate (USA-JPN)"
  ["54430001"]="Dead Or Alive 3 (USA)"
  ["4E4D0005"]="Dead To Rights (USA)"
  ["4E4D0015"]="Dead To Rights II (USA)"
  ["55530004"]="Deathrow (USA)"
  ["45410049"]="Def Jam - Fight For Ny (USA)"
  ["4D570006"]="Defender (USA)"
  ["4E4C0002"]="Delta Force - Black Hawk Down (GLO)"
  ["4D440003"]="Dennou Taisen - Dronez (JPN)"
  ["54510026"]="Destroy All Humans! (USA-JPN)"
  ["54510106"]="Destroy All Humans! 2 (GLO)"
  ["45530005"]="Deus Ex - Invisible War (USA-JPN)"
  ["56560029"]="Die Hard - Vendetta (PAL)"
  ["42410001"]="Digimon Rumble Arena 2 (USA)"
  ["42410002"]="Digimon World 4 (USA)"
  ["43430003"]="Dino Crisis 3 (USA-JPN)"
  ["4D530069"]="Dinosaur Hunting - U.D (JPN)"
  ["544D000F"]="Dinotopia - The Sunstone Odyssey (USA)"
  ["41560027"]="Disney's Extreme Skate Adventure (USA)"
  ["4156004E"]="Doom 3 - Resurrection Of Evil (GLO)"
  ["41560020"]="Doom 3 L.C.E (GLO)"
  ["42550004"]="Double-S.T.E.A.L - The 2Nd Clash (JPN)"
  ["42550001"]="Double-S.T.E.A.L (JPN)"
  ["4D570011"]="Dr. Muto (USA)"
  ["56550028"]="Dr. Seuss' The Cat In The Hat (USA-JPN)"
  ["4947007A"]="Dragon Ball Z - Sagas (USA)"
  ["55530012"]="Dragon's Lair 3D - R.T.T.L (USA)"
  ["4D4A000B"]="Drake Of The 99 Dragons (USA)"
  ["41590004"]="Dreamfall - T.L.J (USA-JPN)"
  ["4156003B"]="Dreamworks Madagascar (USA-PAL)"
  ["41560058"]="Dreamworks Over The Hedge (GLO)"
  ["41560038"]="Dreamworks Shark Tale (GLO)"
  ["41560048"]="Dreamworks Shrek - Superslam (GLO)"
  ["48570001"]="Drihoo (JPN)"
  ["49470038"]="Driv3r (GLO)"
  ["4947007F"]="Driver - Parallel Lines (GLO)"
  ["49470013"]="Dungeons & Dragons - Heroes (USA-JPN)"
  ["4B4F0003"]="Dynasty Warriors 3 (USA)"
  ["4B4F0004"]="Dynasty Warriors 4 (USA-JPN)"
  ["4B4F0007"]="Dynasty Warriors 5 (USA-JPN)"
  ["4D570032"]="Ed Edd N Eddy - The Mis-Edventures (USA)"
  ["4B420002"]="Egg Mania - Eggstreme Madness (USA)"
  ["5655000E"]="Enclave (USA)"
  ["434D0028"]="England Int'l Football - 2004 Ed. (PAL)"
  ["49470022"]="Enter The Matrix (USA)"
  ["56550043"]="Eragon (GLO)"
  ["53450028"]="Espn Baseball 2K4 (USA)"
  ["53450024"]="Espn College Hoops (USA)"
  ["53450033"]="Espn College Hoops 2K5 (USA)"
  ["4B4E000B"]="Espn Int'l Winter Sports 2002 (USA)"
  ["4B4E0005"]="Espn Mls Extratime 2002 (USA)"
  ["53450031"]="Espn Nba 2K5 (USA)"
  ["4B4E0006"]="Espn Nba 2Night 2002 (USA)"
  ["53450023"]="Espn Nba Basketball (USA)"
  ["53450030"]="Espn Nfl 2K5 (USA)"
  ["53450022"]="Espn Nfl Football 2K4 (USA)"
  ["4B4E0003"]="Espn Nfl Primetime 2002 (USA)"
  ["53450032"]="Espn Nhl 2K5 (USA)"
  ["53450026"]="Espn Nhl Hockey (USA)"
  ["5451000B"]="Evil Dead - A.F.O.B (USA-PAL)"
  ["54510025"]="Evil Dead - Regeneration (USA-JPN)"
  ["49460001"]="Ex-Chaser (JPN)"
  ["4B4B0003"]="Exaskeleton (JPN)"
  ["45410007"]="F1 2001 (USA)"
  ["45410014"]="F1 2002 (PAL)"
  ["45410032"]="F1 Career Challenge (PAL)"
  ["4D5300D1"]="Fable - The Lost Chapters (USA)"
  ["4D53000D"]="Fable (USA-PAL)"
  ["49500008"]="Fallout - Brotherhood Of Steel (USA-JPN)"
  ["545400B0"]="Family Guy - Video Game! (USA-PAL)"
  ["4156001A"]="Fantastic 4 (GLO)"
  ["55530060"]="Far Cry Instincts - Evolution (GLO)"
  ["55530008"]="Far Cry Instincts (GLO)"
  ["54430004"]="Fatal Frame (USA)"
  ["5443000A"]="Fatal Frame II - C.B - D.C (USA-JPN)"
  ["45410078"]="Fifa Soccer 06 (USA)"
  ["454100A6"]="Fifa Soccer 07 (USA)"
  ["45410017"]="Fifa Soccer 2003 (USA)"
  ["4541003B"]="Fifa Soccer 2004 (USA)"
  ["4541004E"]="Fifa Soccer 2005 (USA)"
  ["45410072"]="Fifa Street (USA)"
  ["45410085"]="Fifa Street 2 (USA)"
  ["4541009C"]="Fifa World Cup Germany 2006 (USA)"
  ["5655002F"]="Fight Club (GLO)"
  ["4541004B"]="Fight Night 2004 (USA)"
  ["45410055"]="Fight Night Round 2 (USA)"
  ["45410086"]="Fight Night Round 3 (USA)"
  ["54510009"]="Fila World Tour Tennis (PAL)"
  ["43430013"]="Final Fight - Streetwise (USA)"
  ["5451001E"]="Finding Nemo (USA)"
  ["4D570012"]="Fireblade (USA)"
  ["454D0009"]="Flatout (USA-JPN)"
  ["454D0020"]="Flatout 2 (GLO)"
  ["41510002"]="Flight Academy (JPN)"
  ["54540077"]="Ford Mustang - The Legend Lives (USA)"
  ["454D0007"]="Ford Racing 2 (USA)"
  ["454D000D"]="Ford Racing 3 (USA)"
  ["454D001F"]="Ford Street Racing (GLO)"
  ["54540089"]="Ford Vs. Chevy (USA)"
  ["49470074"]="Forgotten Realms - Demon Stone (USA-JPN)"
  ["4D53006E"]="Forza Motorsport (GLO)"
  ["48450004"]="Frankie Dettori Racing (PAL)"
  ["4D570007"]="Freaky Flyers (USA)"
  ["4541002E"]="Freedom Fighters (USA)"
  ["4D570017"]="Freestyle Metal X (USA)"
  ["4B4E002C"]="Frogger - Ancient Shadow (USA)"
  ["4B4E0013"]="Frogger Beyond (USA)"
  ["545100F8"]="Full Spectrum Warrior - T.H (USA-JPN)"
  ["54510022"]="Full Spectrum Warrior (USA-JPN)"
  ["4947000B"]="Furious Karting (USA)"
  ["56550008"]="Futurama (USA)"
  ["43560007"]="Future Tactics - The Uprising (USA)"
  ["4D530002"]="Fuzion Frenzy (USA)"
  ["42520001"]="Galaxy Angel (JPN)"
  ["41540004"]="Galleon (USA-JPN)"
  ["4D57000E"]="Gauntlet - Dark Legacy (USA)"
  ["4D570022"]="Gauntlet - Seven Sorrows (USA)"
  ["544D0011"]="Gene Troopers (GLO)"
  ["43430001"]="Genma Onimusha (USA)"
  ["454D0004"]="Ghost Master - T.G.C (PAL)"
  ["4143001A"]="Gladiator - Sword Of Vengeance (USA)"
  ["4C410008"]="Gladius (USA)"
  ["4A410005"]="Goblin Commander - U.T.H (USA)"
  ["49470039"]="Godzilla - D.O.M Melee (GLO)"
  ["49470073"]="Godzilla - Save The Earth (GLO)"
  ["4541005D"]="Goldeneye - Rogue Agent (USA)"
  ["5454007E"]="Gotcha! (PAL)"
  ["4D530053"]="Grabbed By The Ghoulies (USA)"
  ["54540082"]="Grand Theft Auto - San Andreas (USA)"
  ["54540073"]="Grand Theft Auto - Vice City (USA)"
  ["5454000E"]="Grand Theft Auto III (USA)"
  ["4D57000D"]="Gravity Games Bike - S.V.D (USA)"
  ["41560057"]="Greg Hastings' Tournament P. Max'd (GLO)"
  ["41560042"]="Greg Hastings' Tourney Paintball (GLO)"
  ["45430002"]="Grooverider - Slot Car Thunder (USA)"
  ["43430005"]="Group S Challenge (USA-JPN)"
  ["58500001"]="Gui Yi - Daemon Vector (JPN)"
  ["41570001"]="Guilty Gear Isuka (JPN)"
  ["53410002"]="Guilty Gear X2 #Reload - T.M.C (USA)"
  ["4156004B"]="Gun (GLO)"
  ["4D4A0003"]="Gun Metal (USA)"
  ["5345000B"]="Gun Valkyrie (USA)"
  ["54430009"]="Gungriffon - Allied Strike (USA-JPN)"
  ["45410091"]="Half-Life 2 (GLO)"
  ["4D530004"]="Halo - Combat Evolved (USA)"
  ["4D530064"]="Halo 2 (GLO)"
  ["4D5380CD"]="Halo 2 Multiplayer Map Pack (GLO)"
  ["4541003D"]="Harry Potter - Quidditch World Cup (USA)"
  ["4541000E"]="Harry Potter And The C.O.S (USA)"
  ["45410077"]="Harry Potter And The G.O.F (USA)"
  ["4541004C"]="Harry Potter And The P.O.A (USA)"
  ["45410037"]="Harry Potter And The S.S (USA)"
  ["53450025"]="Headhunter - Redemption (USA-PAL)"
  ["58500004"]="Hello Kitty - Roller Rescue (PAL)"
  ["45430004"]="Heroes Of The Pacific (USA)"
  ["54440006"]="High Heat M.L.B 2004 (USA)"
  ["4253000F"]="High Rollers Casino (USA)"
  ["534300FA"]="Hitman - Blood Money (GLO)"
  ["45530012"]="Hitman - Contracts (USA)"
  ["45530009"]="Hitman 2 - Silent Assassin (USA)"
  ["54510089"]="Hot Wheels - S.T.C (USA-JPN)"
  ["56550011"]="Hulk (USA)"
  ["5454009C"]="Hummer Badlands (USA)"
  ["5655002D"]="Hunter - T.R - Redeemer (USA-JPN)"
  ["56550007"]="Hunter - The Reckoning (USA)"
  ["4B4E000A"]="Hyper Sports 2002 Winter (JPN)"
  ["4E4D000F"]="I-Ninja (USA)"
  ["5655004B"]="Ice Age 2 - The Meltdown (GLO)"
  ["42530011"]="IHRA Drag Racing - Sportsman Ed. (USA)"
  ["42530006"]="IHRA Drag Racing 2004 (USA)"
  ["4253000C"]="IHRA Professional Drag Racing 2005 (USA)"
  ["4C410007"]="Indiana Jones - The Emperor's Tomb (USA)"
  ["4947007B"]="Indigo Prophecy (USA-JPN)"
  ["434D0006"]="Indycar Series (USA)"
  ["434D0024"]="Indycar Series 2005 (USA)"
  ["4B550001"]="Innocent Tears (JPN)"
  ["4D530034"]="Inside Pitch 2003 (USA)"
  ["43560006"]="Intellivision Lives! (USA)"
  ["4B4E0008"]="International Superstar Soccer 2 (PAL)"
  ["53410003"]="Iron Phoenix (GLO)"
  ["454D001E"]="Jacked (PAL)"
  ["4D53006D"]="Jade Empire (USA-PAL)"
  ["56550014"]="James Cameron's Dark Angel (USA)"
  ["4D4A000F"]="Jaws Unleashed (USA)"
  ["4B410001"]="Jikkyou World Soccer 2002 (JPN)"
  ["4D530030"]="Jockey's Road (JPN)"
  ["5345000A"]="JSRF - Jet Set Radio Future (USA)"
  ["58490007"]="Judge Dredd - Dredd Vs. Death (USA)"
  ["545100EF"]="Juiced (GLO)"
  ["56550021"]="Jurassic Park - Op Genesis (USA-JPN)"
  ["534300FB"]="Just Cause (GLO)"
  ["57520001"]="Justice League Heroes (USA-PAL)"
  ["43560001"]="Kabuki Warriors (USA)"
  ["4D53000C"]="Kakuto Chojin (USA)"
  ["4A570003"]="Kao The Kangaroo - Round 2 (PAL)"
  ["4B4E0025"]="Karaoke Revolution (USA)"
  ["4B4E002E"]="Karaoke Revolution Party (USA)"
  ["41560002"]="Kelly Slater's Pro Surfer (USA)"
  ["54410001"]="Kikou Heidan J-Phoenix + (JPN)"
  ["4E4D000B"]="Kill Switch (USA)"
  ["4B4E0024"]="King Arthur (USA)"
  ["504C0006"]="Kingdom Under Fire - Heroes (GLO)"
  ["504C0002"]="Kingdom Under Fire - T.C (USA-JPN)"
  ["544D0007"]="Knights Of The Temple - I.C (PAL)"
  ["544D0013"]="Knights Of The Temple II (GLO)"
  ["4541000A"]="Knockout Kings 2002 (USA)"
  ["5340000000"]="Kof - Maximum Impact - Maniax (USA)"
  ["4D530031"]="Kung Fu Chaos (USA-JPN)"
  ["4D570025"]="L.A. Rush (USA-PAL)"
  ["47560004"]="Land Of The Dead - R.T.F.G (GLO)"
  ["534300FD"]="Lara Croft Tomb Raider - Legend (GLO)"
  ["5553000B"]="Largo Winch - Empire Under Threat (PAL)"
  ["4B4E000F"]="Le Tour De France (PAL)"
  ["4553000F"]="Legacy Of Kain - Defiance (USA)"
  ["41430003"]="Legends Of Wrestling (USA)"
  ["4143000F"]="Legends Of Wrestling II (USA)"
  ["4553001D"]="Lego Star Wars - The Video Game (USA)"
  ["4C41001F"]="Lego Star Wars II - T.O.T (USA-PAL)"
  ["56550031"]="Leisure Suit Larry - M.C.L (USA-JPN)"
  ["4156001F"]="Lemony Snicket's - A.S.O.U.E (USA)"
  ["4D53005D"]="Links 2004 (USA)"
  ["434D0004"]="LMA Manager 2003 (PAL)"
  ["434D000F"]="LMA Manager 2004 (PAL)"
  ["434D0046"]="LMA Manager 2005 (PAL)"
  ["434D0054"]="LMA Manager 2006 (PAL)"
  ["49470006"]="Loons - The Fight For Fame (USA)"
  ["56550018"]="Mace Griffin - Bounty Hunter (USA-JPN)"
  ["45530001"]="Mad Dash Racing (USA)"
  ["45410075"]="Madden Nfl 06 (USA)"
  ["4541009F"]="Madden Nfl 07 (USA)"
  ["454100AC"]="Madden Nfl 08 (USA)"
  ["4541023B"]="Madden Nfl 09 (USA-JPN)"
  ["45410001"]="Madden Nfl 2002 (USA)"
  ["45410019"]="Madden Nfl 2003 (USA)"
  ["45410036"]="Madden Nfl 2004 (USA)"
  ["4541004D"]="Madden Nfl 2005 (USA)"
  ["54540009"]="Mafia (USA)"
  ["4D530066"]="Magatama (JPN)"
  ["544B0001"]="Magi Death Fight! (JPN)"
  ["4947000E"]="Magic - T.G - Battlegrounds (GLO)"
  ["54540096"]="Major League Baseball 2K5 - Wse (USA)"
  ["53450037"]="Major League Baseball 2K5 (USA)"
  ["54540092"]="Major League Baseball 2K6 (USA)"
  ["545400B1"]="Major League Baseball 2K7 (USA)"
  ["4253000A"]="Malice (USA)"
  ["434D0049"]="Manchester United Manager 2005 (PAL)"
  ["54540019"]="Manhunt (USA)"
  ["4947007D"]="Marc Ecko's Getting Up - C.U.P (GLO)"
  ["4156005C"]="Marvel - Ultimate Alliance (GLO)"
  ["4541038A"]="Marvel Nemesis - R.O.T.I (USA)"
  ["43430007"]="Marvel Vs. Capcom 2 - N.A.O.H (JPN)"
  ["43430007"]="Marvel Vs. Capcom 2 - N.A.O.H (PAL)"
  ["43430007"]="Marvel Vs. Capcom 2 - N.A.O.H (USA)"
  ["454D000A"]="Mashed - Drive To Survive (PAL)"
  ["454D001B"]="Mashed - Fully Loaded (PAL)"
  ["4156000B"]="Mat Hoffman's Pro Bmx 2 (USA)"
  ["54540003"]="Max Payne (USA)"
  ["5454000C"]="Max Payne 2 - T.F.O.M.P (USA)"
  ["4D53002E"]="Maximum Chase (USA)"
  ["4D530017"]="Mechassault (USA-PAL)"
  ["4D53006B"]="Mechassault 2 - Lone Wolf (GLO)"
  ["4541005E"]="Medal Of Honor - European Assault (USA)"
  ["4541001A"]="Medal Of Honor - Frontline (USA)"
  ["4541003F"]="Medal Of Honor - Rising Sun (USA)"
  ["43430011"]="Mega Man Anniversary Collection (USA)"
  ["4D490004"]="Memorick - Knights Apprentice (USA-PAL)"
  ["56550019"]="Men Of Valor (USA-JPN)"
  ["4C410015"]="Mercenaries (GLO)"
  ["5655000A"]="Metal Arms - G.I.T.S (USA-JPN)"
  ["58490001"]="Metal Dungeon (USA)"
  ["4B4E0007"]="Metal Gear Solid 2 - Substance (USA)"
  ["53400"]="Metal Slug 3 (USA-JPN)"
  ["53400000"]="Metal Slug 4 (USA-PAL)"
  ["53400000000"]="Metal Slug 5 (GLO)"
  ["46530006"]="Metal Wolf Chaos (JPN)"
  ["44580001"]="Miami Vice (PAL)"
  ["4947001C"]="Micro Machines (PAL)"
  ["54540079"]="Midnight Club 3 - Dub Ed Remix (USA)"
  ["54540008"]="Midnight Club II (USA)"
  ["4D53002A"]="Midtown Madness 3 (USA)"
  ["4D57001C"]="Midway Arcade Treasures (USA-PAL)"
  ["4D570020"]="Midway Arcade Treasures 2 (USA-PAL)"
  ["4D57002D"]="Midway Arcade Treasures 3 (USA-PAL)"
  ["434D0003"]="Mike Tyson Heavyweight Boxing (USA)"
  ["41560014"]="Minority Report - Everybody Runs (USA)"
  ["4947001F"]="Mission Impossible - Op Surma (USA-JPN)"
  ["4D57001D"]="Mlb Slugfest - Loaded (USA)"
  ["4D570008"]="Mlb Slugfest 2003 (USA)"
  ["4D570009"]="Mlb Slugfest 2004 (USA)"
  ["4D570038"]="Mlb Slugfest 2006 (USA)"
  ["43560005"]="Mojo! (USA)"
  ["4947000F"]="Monopoly Party (USA)"
  ["55530049"]="Monster 4X4 - World Circuit (USA)"
  ["41560041"]="Monster Garage (USA)"
  ["4D570034"]="Mortal Kombat - Armageddon (USA)"
  ["4D57000C"]="Mortal Kombat - Deadly Alliance (USA)"
  ["4D570019"]="Mortal Kombat - Deception (USA)"
  ["4D570029"]="Mortal Kombat - Shaolin Monks (USA-PAL)"
  ["54540015"]="Motocross Mania 3 (USA-PAL)"
  ["54510088"]="Motogp - Ultimate Racing Tech 3 (GLO)"
  ["54510008"]="Motogp (USA)"
  ["54510016"]="Motogp 2 (USA)"
  ["58490005"]="Motor Trend's Lotus Challenge (USA)"
  ["5454000B"]="MTV Celebrity Deathmatch (USA)"
  ["434D0029"]="MTV Music Generator 3 (USA)"
  ["41560022"]="Mtx Mototrax (USA-JPN)"
  ["55530016"]="Murakumo - Renegade Mech Pursuit (USA)"
  ["56430001"]="Muzzle Flash (JPN)"
  ["4541008D"]="Mvp 06 Ncaa Baseball (USA)"
  ["4541002D"]="Mvp Baseball 2003 (USA)"
  ["45410045"]="Mvp Baseball 2004 (USA)"
  ["45410056"]="Mvp Baseball 2005 (USA)"
  ["54510003"]="Mx 2002 Featuring Ricky Carmichael (USA)"
  ["54510010"]="Mx Superfly (USA)"
  ["54510021"]="Mx Unleashed (USA-JPN)"
  ["545100ED"]="Mx Vs. Atv Unleashed (USA-JPN)"
  ["4356000E"]="Mx World Tour Ft J.L (USA)"
  ["55530011"]="Myst III - Exile (USA)"
  ["5553004A"]="Myst Iv - Revelation (GLO)"
  ["5451001A"]="N. Spongebob Squarepants - B.F.B.B (USA)"
  ["545100FA"]="N. Spongebob Squarepants - L.C (USA-JPN)"
  ["54510027"]="N. Spongebob Squarepants - T.M (USA-JPN)"
  ["4D53003C"]="N.U.D.E.@ (JPN)"
  ["53550002"]="Nakajima Tetsuya No Othelo Seminar (JPN)"
  ["4E4D0007"]="Namco Museum (USA)"
  ["4E4D0016"]="Namco Museum 50Th Anniversary (USA)"
  ["4D570024"]="Narc (USA)"
  ["4541008B"]="Nascar 06 - Total Team Control (USA)"
  ["454100A3"]="Nascar 07 (USA)"
  ["45410053"]="Nascar 2005 - Chase For The Cup (USA)"
  ["49470009"]="Nascar Heat 2002 (USA)"
  ["45410002"]="Nascar Thunder 2002 (USA)"
  ["4541001B"]="Nascar Thunder 2003 (USA)"
  ["45410031"]="Nascar Thunder 2004 (USA)"
  ["53450002"]="NBA 2K2 (USA)"
  ["53450013"]="NBA 2K3 (USA)"
  ["54540090"]="NBA 2K6 (USA)"
  ["545400AE"]="NBA 2K7 (GLO)"
  ["4D57002E"]="NBA Ballers - Phenom (USA)"
  ["4D570010"]="NBA Ballers (USA)"
  ["4D530011"]="NBA Inside Drive 2002 (USA)"
  ["4D530045"]="NBA Inside Drive 2003 (USA)"
  ["4D53000B"]="NBA Inside Drive 2004 (USA-JPN)"
  ["41430013"]="NBA Jam (USA)"
  ["4541007A"]="NBA Live 06 (USA)"
  ["454100A1"]="NBA Live 07 (USA)"
  ["45410003"]="NBA Live 2002 (USA)"
  ["4541001C"]="NBA Live 2003 (USA)"
  ["45410038"]="NBA Live 2004 (USA)"
  ["45410050"]="NBA Live 2005 (USA)"
  ["4B4E0012"]="NBA Starting Five (USA)"
  ["45410058"]="NBA Street V3 (USA)"
  ["45410027"]="NBA Street Vol. 2 (USA)"
  ["53450018"]="Ncaa College Basketball 2K3 (USA)"
  ["53450010"]="Ncaa College Football 2K3 (USA)"
  ["45410080"]="Ncaa Football 06 (USA)"
  ["454100A2"]="Ncaa Football 07 (USA)"
  ["454100AB"]="Ncaa Football 08 (USA)"
  ["4541001D"]="Ncaa Football 2003 (USA)"
  ["45410035"]="Ncaa Football 2004 (USA)"
  ["45410051"]="Ncaa Football 2005 (USA)"
  ["45410090"]="Ncaa March Madness 06 (USA)"
  ["45410044"]="Ncaa March Madness 2004 (USA)"
  ["45410052"]="Ncaa March Madness 2005 (USA)"
  ["4541009E"]="Need For Speed - Carbon (USA)"
  ["45410028"]="Need For Speed - Hot Pursuit 2 (USA)"
  ["4541007B"]="Need For Speed - Most Wanted - B.E (USA)"
  ["45410047"]="Need For Speed - Underground (USA)"
  ["4541005A"]="Need For Speed - Underground 2 (USA)"
  ["4A570002"]="Neighbours From Hell (PAL)"
  ["54510001"]="New Legends (USA)"
  ["53450006"]="NFL 2K2 (USA)"
  ["53450011"]="NFL 2K3 (USA)"
  ["4D570001"]="NFL Blitz 2002 (USA)"
  ["4D57000A"]="NFL Blitz 2003 (USA)"
  ["4D570014"]="NFL Blitz Pro (USA)"
  ["4D530006"]="NFL Fever 2002 (USA)"
  ["4D530028"]="NFL Fever 2003 (USA)"
  ["4D53004D"]="NFL Fever 2004 (USA)"
  ["4541008E"]="NFL Head Coach (USA)"
  ["45410048"]="NFL Street (USA)"
  ["45410057"]="NFL Street 2 (USA)"
  ["4541007C"]="NHL 06 (USA)"
  ["454100A5"]="NHL 07 (USA)"
  ["45410005"]="NHL 2002 (USA)"
  ["4541001E"]="NHL 2003 (USA)"
  ["45410030"]="NHL 2004 (USA)"
  ["4541004F"]="NHL 2005 (USA)"
  ["53450017"]="NHL 2K3 (USA)"
  ["5454008D"]="NHL 2K6 (USA)"
  ["545400AD"]="NHL 2K7 (GLO)"
  ["4D570003"]="NHL Hitz 2002 (USA)"
  ["4D57000B"]="NHL Hitz 2003 (USA)"
  ["4D57001A"]="NHL Hitz Pro (USA)"
  ["4D53004E"]="NHL Rivals 2004 (USA-JPN)"
  ["49470028"]="Nickelodeon Party Blast (USA)"
  ["545100F4"]="Nickelodeon Tak - T.G.J.C (USA-JPN)"
  ["5451008B"]="Nickelodeon Tak 2 - T.S.O.D (USA-JPN)"
  ["4D530008"]="Night Caster - Defeat The Darkness (USA)"
  ["4A410002"]="Night Caster II - Equinox (USA)"
  ["54430003"]="Ninja Gaiden (USA-JPN)"
  ["5443000D"]="Ninja Gaiden Black (USA)"
  ["4B4F0001"]="Nobunaga No Yabou - Ranseiki (JPN)"
  ["4D490009"]="Obscure (USA)"
  ["4D530001"]="Oddworld - Munch's Oddysee (USA)"
  ["4541006D"]="Oddworld - Stranger's Wrath (USA)"
  ["55530061"]="Open Season (GLO)"
  ["434D005A"]="Operation Flashpoint - Elite (GLO)"
  ["46530002"]="Otogi - Myth Of Demons (USA)"
  ["46530004"]="Otogi 2 - Immortal Warriors (USA)"
  ["53530006"]="Outlaw Golf - 9 M.H.O.X-Mas (USA)"
  ["56550010"]="Outlaw Golf (USA)"
  ["54540017"]="Outlaw Golf 2 (USA)"
  ["54540076"]="Outlaw Tennis (USA)"
  ["53538003"]="Outlaw Volleyball - Red Hot (USA)"
  ["53530003"]="Outlaw Volleyball (USA)"
  ["53450036"]="Outrun 2 (USA)"
  ["53450088"]="Outrun 2006 - Coast 2 Coast (GLO)"
  ["4E4D0006"]="Pac-Man World 2 (USA)"
  ["4E4D0017"]="Pac-Man World 3 (USA)"
  ["44430003"]="Painkiller - Hell Wars (USA)"
  ["53450007"]="Panzer Dragoon Orta (USA)"
  ["4A570009"]="Panzer Elite Action - F.O.G (PAL)"
  ["47560001"]="Pariah (GLO)"
  ["5553004C"]="Peter Jackson's King Kong - T.O.G (GLO)"
  ["41510001"]="Petit Copter (JPN)"
  ["4D53004A"]="Phantasy Star Online Ep I & II (USA)"
  ["504C0001"]="Phantom Crash (USA)"
  ["4D530046"]="Phantom Dust (USA)"
  ["4F580002"]="Pilot Down - Behind Enemy Lines (PAL)"
  ["4356000A"]="Pinball Hall Of Fame - T.G.C (USA)"
  ["45410015"]="Pirates - The Legend Of Black Kat (USA)"
  ["42530004"]="Pirates Of The Caribbean (USA)"
  ["41560018"]="Pitfall - The Lost Expedition (USA)"
  ["41480002"]="Playboy - The Mansion (USA)"
  ["544B0004"]="Plus Plum 2 (JPN)"
  ["4D5300D4"]="Pocketbike Racer (USA)"
  ["5A440001"]="Pool-Shark 2 (PAL)"
  ["4253000B"]="Power Drome (USA)"
  ["56550030"]="Predator - Concrete Jungle (GLO)"
  ["5553001D"]="Prince Of Persia - T.S.O.T (USA-JPN)"
  ["55530058"]="Prince Of Persia - The Two Thrones (GLO)"
  ["5553003B"]="Prince Of Persia - Warrior Within (GLO)"
  ["434D0008"]="Prisoner Of War (USA)"
  ["4343000B"]="Pro Cast - Sports Fishing Game (USA)"
  ["4B4E0022"]="Pro Evolution Soccer 4 (PAL)"
  ["4B4E0030"]="Pro Evolution Soccer 5 (PAL)"
  ["41540003"]="Pro Fishing Challenge (USA)"
  ["45530019"]="Project - Snowblind (USA-JPN)"
  ["4D530003"]="Project Gotham Racing (USA)"
  ["4D53004B"]="Project Gotham Racing 2 (USA-JPN)"
  ["4F580004"]="Prostroke Golf - W.T 2007 (USA-PAL)"
  ["4D570016"]="Psi-Ops - The Mindgate Conspiracy (USA)"
  ["4D4A0012"]="Psychonauts (USA)"
  ["53550009"]="Psyvariar 2 - Extend Edition (JPN)"
  ["4A410001"]="Pulse Racer (USA)"
  ["41440002"]="Pump It Up - Exceed (USA)"
  ["54540011"]="Pure Pinball (USA)"
  ["53450027"]="Puyo Pop Fever (PAL)"
  ["4D530015"]="Quantum Redshift (USA)"
  ["4E4D0008"]="R-Racing Evolution (USA)"
  ["41560010"]="R.T.C.W - Tides Of War (GLO)"
  ["4D53000F"]="Rallisport Challenge (USA)"
  ["4D530039"]="Rallisport Challenge 2 (GLO)"
  ["41560009"]="Rally Fusion - Race Of Champions (USA)"
  ["4156003A"]="Rapala Pro Fishing (GLO)"
  ["54510109"]="Ratatouille (USA)"
  ["55530002"]="Rayman 3 - Hoodlum Havoc (USA-JPN)"
  ["55530003"]="Rayman Arena (USA)"
  ["4D4A0011"]="Raze's Hell (GLO)"
  ["49410001"]="Real World Golf (GLO)"
  ["5454001A"]="Red Dead Revolver (USA)"
  ["54510005"]="Red Faction II (USA)"
  ["56550027"]="Red Ninja - End Of Honor (GLO)"
  ["4D57000F"]="Redcard 20-03 (USA)"
  ["424D0002"]="Reign Of Fire (USA)"
  ["5345001D"]="Rent A Hero No. 1 (JPN)"
  ["534300FF"]="Reservoir Dogs (USA)"
  ["53430005"]="Richard Burns Rally (PAL)"
  ["434D0057"]="Ricky Ponting Int'l Cricket 2005 (PAL)"
  ["49500006"]="Rlh - Run Like Hell (USA)"
  ["4D570018"]="Roadkill (USA)"
  ["4343000C"]="Robin Hood - D.O.T.C (USA-JPN)"
  ["54530005"]="Robocop (USA)"
  ["42570001"]="Robot Wars - Extreme Destruction (PAL)"
  ["544D0002"]="Robotech - Battlecry (USA)"
  ["5454001B"]="Robotech - Invasion (USA)"
  ["56550037"]="Robots (USA-JPN)"
  ["55530014"]="Rocky (USA)"
  ["55530034"]="Rocky Legends (GLO)"
  ["4B420004"]="Rogue Ops (USA)"
  ["5343000E"]="Rogue Trooper (GLO)"
  ["4947002E"]="Rollercoaster Tycoon (USA-JPN)"
  ["53430007"]="Rolling (PAL)"
  ["4A410006"]="Room Zoom - Race For Impact (USA)"
  ["45410087"]="Rugby 06 (USA)"
  ["45410061"]="Rugby 2005 (USA)"
  ["48500005"]="Rugby Challenge 2006 (PAL)"
  ["48450001"]="Rugby League (PAL)"
  ["48450005"]="Rugby League 2 (PAL)"
  ["5340000"]="Samurai Shodown V (GLO)"
  ["4B4F0006"]="Samurai Warriors (USA)"
  ["5454007A"]="Scaler (USA-PAL)"
  ["4C530002"]="Scar - Squadra Corse Alfa Romeo (PAL)"
  ["5655003F"]="Scarface - The World Is Yours (GLO)"
  ["5451000E"]="Scooby-Doo! Mystery Mayhem (GLO)"
  ["5451001F"]="Scooby-Doo! Night Of 100 Frights (USA)"
  ["545100F7"]="Scooby-Doo! Unmasked (GLO)"
  ["56550017"]="Seablade (USA)"
  ["41560050"]="Seaworld Adventure Parks - S.D.S.A (GLO)"
  ["434D0047"]="Second Sight (GLO)"
  ["4C410006"]="Secret Weapons Over Normandy (USA)"
  ["53450003"]="Sega Gt 2002 (USA)"
  ["53450021"]="Sega Gt Online (USA)"
  ["53450014"]="Sega Soccer Slam (USA)"
  ["434D005B"]="Sensible Soccer 2006 (PAL)"
  ["41510003"]="Sentou Yousei Yukikaze - Y.N.M.S (JPN)"
  ["54540004"]="Serious Sam (USA)"
  ["5454000D"]="Serious Sam II (USA-PAL)"
  ["4B4E000E"]="Shadow Of Memories (PAL)"
  ["49470025"]="Shadow Ops - Red Mercury (USA-JPN)"
  ["53450086"]="Shadow The Hedgehog (USA)"
  ["54540083"]="Shattered Union (USA)"
  ["45530013"]="Shellshock - Nam '67 (GLO)"
  ["4D530032"]="Shenmue II (USA)"
  ["4D500002"]="Shikigami No Shiro (JPN)"
  ["4B490001"]="Shikigami No Shiro Evolution (JPN)"
  ["4B490002"]="Shikigami No Shiro II (JPN)"
  ["41540002"]="Shin Megami Tensei - Nine (JPN)"
  ["45460001"]="Shinchou Mahjong (JPN)"
  ["4143001D"]="Showdown - Legends Of Wrestling (USA)"
  ["544D0001"]="Shrek (USA)"
  ["41560037"]="Shrek 2 (USA-JPN)"
  ["544D0004"]="Shrek Super Party (USA)"
  ["5454008F"]="Sid Meier's Pirates! (GLO)"
  ["4B4E0004"]="Silent Hill 2 - Restless Dreams (USA)"
  ["4B4E001F"]="Silent Hill 4 - The Room (USA-JPN)"
  ["4B4E001A"]="Silent Scope Complete (USA)"
  ["4A570005"]="Ski Racing 2005 (PAL)"
  ["4A57000A"]="Ski Racing 2006 (PAL)"
  ["49470011"]="Slam Tennis (PAL)"
  ["4E4D0001"]="Smashing Drive (USA)"
  ["4D5300D3"]="Sneak King (USA)"
  ["4D530023"]="Sneakers (USA)"
  ["4D49000D"]="Sniper Elite (USA)"
  ["5340"]="Snk Vs. Capcom - Svc Chaos (USA-JPN)"
  ["4156001B"]="Soldier Of Fortune II - D.H (GLO)"
  ["5345002B"]="Sonic Heroes (USA)"
  ["5345003C"]="Sonic Mega Collection Plus (GLO)"
  ["53450087"]="Sonic Riders (USA)"
  ["4E4D0003"]="Soulcalibur II (USA)"
  ["5345008B"]="Spartan - Total Warrior (USA-JPN)"
  ["4E4D000C"]="Spawn - Armageddon (USA)"
  ["4143000B"]="Speed Kings (USA)"
  ["54510023"]="Sphinx And The Cursed Mummy (USA-JPN)"
  ["41560006"]="Spider-Man (USA)"
  ["4156002B"]="Spider-Man 2 (GLO)"
  ["53450029"]="Spikeout - Battle Street (USA)"
  ["4947001B"]="Splashdown (USA)"
  ["54540093"]="Splat Magazine Renegade Paintball (GLO)"
  ["5454007C"]="Spy Vs. Spy (USA)"
  ["4D570037"]="Spyhunter - Nowhere To Run (USA)"
  ["4D570004"]="Spyhunter (USA)"
  ["4D57001B"]="Spyhunter 2 (USA)"
  ["56550034"]="Spyro - A Hero's Tail (GLO)"
  ["4E4D0013"]="Srs - Street Racing Syndicate (USA)"
  ["4541003C"]="Ssx 3 (USA)"
  ["45410082"]="Ssx On Tour (USA)"
  ["45410004"]="Ssx Tricky (USA)"
  ["4D4D0001"]="Stacked With Daniel Negreanu (USA)"
  ["4D440004"]="Stake (GLO)"
  ["544D0010"]="Star Trek - Shattered Universe (USA)"
  ["4C410011"]="Star Wars - Battlefront (GLO)"
  ["4C41001A"]="Star Wars - Battlefront II (GLO)"
  ["4C410017"]="Star Wars - Episode III - R.O.T.S (USA)"
  ["4C410009"]="Star Wars - J.K II - Jedi Outcast (USA)"
  ["4C41000B"]="Star Wars - J.K- Jedi Academy (USA)"
  ["4C410005"]="Star Wars - Jedi Starfighter (USA)"
  ["4C410003"]="Star Wars - K.O.T.O.R (USA)"
  ["4C410014"]="Star Wars - K.O.T.O.R II - T.S.L (USA)"
  ["4C410001"]="Star Wars - Obi-Wan (USA)"
  ["4C410013"]="Star Wars - Republic Commando (USA)"
  ["4C410002"]="Star Wars - Starfighter S.E (USA)"
  ["4C410004"]="Star Wars - The Clone Wars (USA)"
  ["454D0005"]="Starsky & Hutch (USA)"
  ["54540006"]="State Of Emergency (USA)"
  ["43430009"]="Steel Battalion - Line Of Contact (GLO)"
  ["43430002"]="Steel Battalion (USA)"
  ["4D49000B"]="Still Life (USA)"
  ["48500001"]="Stolen (GLO)"
  ["4343000F"]="Street Fighter Anniversary Coll (GLO)"
  ["41560003"]="Street Hoops (USA)"
  ["43560008"]="Strike Force Bowling (USA)"
  ["41590002"]="Stubbs The Zombie In R.W.A.P (USA-JPN)"
  ["4D53000A"]="Sudeki (GLO)"
  ["4A410004"]="Super Bubble Pop (USA)"
  ["53450038"]="Super Monkey Ball Deluxe (USA)"
  ["49470016"]="Superman - The Man Of Steel (USA)"
  ["454100A0"]="Superman Returns (USA)"
  ["56560025"]="Swat - Global Strike Team (USA-JPN)"
  ["41430010"]="Sx Superstar (USA)"
  ["4D490006"]="Syberia (USA-PAL)"
  ["4D490008"]="Syberia II (GLO)"
  ["55530054"]="T.C Ghost Recon - A.W (GLO)"
  ["55530007"]="T.C Ghost Recon - I.T (USA-JPN)"
  ["55530006"]="T.C Ghost Recon (USA)"
  ["5553004D"]="T.C Ghost Recon 2 - Summit Strike (GLO)"
  ["55530005"]="T.C Ghost Recon 2 (GLO)"
  ["5553005F"]="T.C Rainbow Six - Critical Hour (GLO)"
  ["55530048"]="T.C Rainbow Six - Lockdown (GLO)"
  ["55530037"]="T.C Rainbow Six 3 - Black Arrow (GLO)"
  ["55530013"]="T.C Rainbow Six 3 (GLO)"
  ["55530041"]="T.C Splinter Cell - Chaos Theory (GLO)"
  ["5553005E"]="T.C Splinter Cell - Double Agent (GLO)"
  ["5553000C"]="T.C Splinter Cell (USA)"
  ["55530019"]="T.C Splinter Cell 2 - P.T (GLO)"
  ["56550026"]="T.C.O.R - Escape From B.B (USA-JPN)"
  ["4B4E0023"]="T.M.N.T 2 - Battle Nexus (USA)"
  ["4B4E002A"]="T.M.N.T 3 - Mutant Nightmare (USA)"
  ["454D001C"]="Taito Legends (USA)"
  ["454D0022"]="Taito Legends 2 (GLO)"
  ["53550005"]="Takahashi Junko No Mahjong Seminar (JPN)"
  ["4D530014"]="Tao Feng - Fist Of The Lotus (USA-JPN)"
  ["4947000D"]="Taz - Wanted (USA)"
  ["5443000E"]="Tecmo Classic Arcade (USA-JPN)"
  ["4D4A0013"]="Teen Titans (GLO)"
  ["4B4E001B"]="Teenage Mutant Ninja Turtles (USA)"
  ["41560026"]="Tenchu - Return From Darkness (USA-JPN)"
  ["46530005"]="Tenchu 3 - Kaiki No Shou (JPN)"
  ["41500001"]="Tenerezza (JPN)"
  ["4D53002F"]="Tenku - Freestyle Snowboarding (JPN)"
  ["4D490003"]="Tennis Masters Series 2003 (USA)"
  ["4947003B"]="Terminator 3 - R.O.T.M (GLO)"
  ["4947003E"]="Terminator 3 - The Redemption (USA-JPN)"
  ["49470075"]="Test Drive - E.O.D (USA-JPN)"
  ["49470007"]="Test Drive (USA)"
  ["49470001"]="Test Drive Off-Road - Wide Open (USA)"
  ["5451000A"]="Tetris Worlds (USA)"
  ["5451001C"]="Tetris Worlds Live (USA)"
  ["49580001"]="The Bard's Tale (USA)"
  ["4B410002"]="The Baseball 2002 - B.B.P.S (JPN)"
  ["43560011"]="The Bible Game (USA)"
  ["42560003"]="The Chronicles Of Narnia L.W.W (USA-JPN)"
  ["545400AB"]="The Da Vinci Code (USA-PAL)"
  ["5553003A"]="The Dukes Of Hazzard - R.O.G.L (USA-PAL)"
  ["42530005"]="The Elder Scrolls III - M.G.O.T.Y (USA)"
  ["42530001"]="The Elder Scrolls III - Morrowind (USA)"
  ["54510020"]="The Fairly Oddparents - B.D.R (USA)"
  ["4541007D"]="The Godfather (USA)"
  ["53430003"]="The Great Escape (USA)"
  ["5454007B"]="The Guy Game (USA)"
  ["544D000D"]="The Haunted Mansion (USA)"
  ["56550023"]="The Hobbit - T.P.T.L.O.T.R (USA-JPN)"
  ["53450008"]="The House Of The Dead III (USA)"
  ["4156005B"]="The Hustle - Detroit Streets (GLO)"
  ["56550039"]="The Incredible Hulk - U.D (GLO)"
  ["545100F6"]="The Incredibles - R.O.T.U (USA-JPN)"
  ["54510028"]="The Incredibles (USA-JPN)"
  ["4553000E"]="The Italian Job (USA)"
  ["534E000A"]="The King Of Fighters - Neowave (GLO)"
  ["534000000"]="The King Of Fighters 2002 (USA-PAL)"
  ["534000"]="The King Of Fighters 2003 (USA-JPN)"
  ["5655004A"]="The Legend Of Spyro - A.N.B (GLO)"
  ["4541003E"]="The Lord Of The Rings - T.R.O.T.K (USA)"
  ["4541005F"]="The Lord Of The Rings - T.T.A (USA)"
  ["45410010"]="The Lord Of The Rings - T.T.T (USA)"
  ["56550004"]="The Lord Of The Rings -T.F.O.T.R (USA)"
  ["4947007C"]="The Matrix - Path Of Neo (USA-JPN)"
  ["54510018"]="The Punisher (USA-JPN)"
  ["56550015"]="The Simpsons - Hit & Run (USA-JPN)"
  ["45410013"]="The Simpsons - Road Rage (USA)"
  ["45410043"]="The Sims - Bustin' Out (USA)"
  ["4541002F"]="The Sims (USA)"
  ["4541038B"]="The Sims 2 (USA)"
  ["4D57002C"]="The Suffering - Ties That Bind (USA-PAL)"
  ["4D570015"]="The Suffering (USA)"
  ["49470026"]="The Terminator - Dawn Of Fate (USA)"
  ["5655000D"]="The Thing (USA)"
  ["45410060"]="The Urbz - Sims In The City (USA)"
  ["5454009B"]="The Warriors (USA)"
  ["4D530048"]="The Wild Rings (JPN)"
  ["45530004"]="Thief - Deadly Shadows (USA-JPN)"
  ["46530003"]="Thousand Land (JPN)"
  ["4C410022"]="Thrillville (GLO)"
  ["4541007E"]="Tiger Woods Pga Tour 06 (USA)"
  ["454100A4"]="Tiger Woods Pga Tour 07 (USA)"
  ["45410021"]="Tiger Woods Pga Tour 2003 (USA)"
  ["4541003A"]="Tiger Woods Pga Tour 2004 (USA)"
  ["45410054"]="Tiger Woods Pga Tour 2005 (USA)"
  ["42560004"]="Tim B's T.N.B.C - Oogie's Revenge (USA)"
  ["45410066"]="Timesplitters - Future Perfect (USA)"
  ["4553000A"]="Timesplitters 2 (USA)"
  ["4B4E0020"]="Tmnt - Mutant Melee (USA)"
  ["434D0002"]="Toca Race Driver (PAL)"
  ["434D0011"]="Toca Race Driver 2 (USA)"
  ["434D0050"]="Toca Race Driver 3 (GLO)"
  ["434D000E"]="Toca Race Driver Online Enabled (PAL)"
  ["5345000F"]="Toejam & Earl III - M.T.E (USA)"
  ["4E4B0001"]="Tom & Jerry In War Of The Whiskers (USA)"
  ["41560049"]="Tony Hawk's American Wasteland (GLO)"
  ["41560001"]="Tony Hawk's Pro Skater 2X (USA)"
  ["41560004"]="Tony Hawk's Pro Skater 3 (USA)"
  ["41560017"]="Tony Hawk's Pro Skater 4 (USA)"
  ["4156005E"]="Tony Hawk's Project 8 (GLO)"
  ["4156002D"]="Tony Hawk's Underground (USA-JPN)"
  ["4156003C"]="Tony Hawk's Underground 2 (GLO)"
  ["4B420007"]="Top Gear - Rpm Tuning (USA)"
  ["4D530035"]="Top Spin (USA)"
  ["545400A9"]="Torino 2006 (GLO)"
  ["55530040"]="Tork - Prehistoric Punk (USA)"
  ["45410041"]="Total Club Manager 2004 (PAL)"
  ["45410065"]="Total Club Manager 2005 (PAL)"
  ["56550013"]="Total Immersion Racing (USA)"
  ["53430010"]="Total Overdose (GLO)"
  ["4D4A0002"]="Totaled! (USA)"
  ["41540001"]="Touge R (JPN)"
  ["54510007"]="Toxic Grind (USA)"
  ["49470004"]="Transworld Snowboarding (USA)"
  ["49470005"]="Transworld Surf (USA)"
  ["4B4B0001"]="Triangle Again (JPN)"
  ["4B4B0002"]="Triangle Again 2 (JPN)"
  ["43560009"]="Trigger Man (USA)"
  ["45410009"]="Triple Play 2002 (USA)"
  ["4947003D"]="Trivial Pursuit - Unhinged (USA)"
  ["42560001"]="Tron 2.0 - Killer App (GLO)"
  ["41560045"]="True Crime - New York City (USA-JPN)"
  ["4156000E"]="True Crime - Streets Of La (USA-JPN)"
  ["41430004"]="Turok - Evolution (USA)"
  ["41560055"]="Ty The Tasmanian Tiger - N.O.T.Q (GLO)"
  ["45410029"]="Ty The Tasmanian Tiger (USA)"
  ["45410063"]="Ty The Tasmanian Tiger 2 - B.R (USA)"
  ["45410070"]="Uefa Champions League 2004-2005 (PAL)"
  ["4541004A"]="Uefa Euro 2004 - Portugal (USA)"
  ["43560002"]="UFC - Tapout (USA)"
  ["544D000A"]="UFC - Tapout 2 (USA)"
  ["57450001"]="Ultimate Beach Soccer (USA)"
  ["454D001D"]="Ultimate Pro Pinball (PAL)"
  ["41560035"]="Ultimate Spider-Man (GLO)"
  ["4D4A000C"]="Ultra Bust-A-Move (USA)"
  ["53550003"]="Umezawa Yukari No Igo Seminar (JPN)"
  ["49470024"]="Unreal Championship (USA-PAL)"
  ["4D570021"]="Unreal Championship 2 - T.L.C (GLO)"
  ["4947003C"]="Unreal II - The Awakening (USA-JPN)"
  ["534300F7"]="Urban Chaos - Riot Response (GLO)"
  ["4143000C"]="Urban Freestyle Soccer (PAL)"
  ["49470034"]="V-Rally 3 (USA-JPN)"
  ["56550029"]="Van Helsing (USA-JPN)"
  ["41430005"]="Vexx (USA)"
  ["5454000A"]="Vietcong - Purple Haze (GLO)"
  ["54540016"]="Virtual Pool - Tournament Ed.(USA-PAL)"
  ["4D530084"]="Volvo - Drive For Life (USA)"
  ["4D53005F"]="Voodoo Vince (USA)"
  ["4156000D"]="Wakeboarding Unleashed Ft S.M (USA)"
  ["424D0003"]="Wallace & Gromit - Project Zoo (USA-JPN)"
  ["4B4E0034"]="Wallace & Gromit - T.C.O.T.W-R (USA-PAL)"
  ["4756000A"]="Warpath (GLO)"
  ["4143001F"]="Wcr - World Championship Rugby (PAL)"
  ["4D530027"]="Whacked! (USA-PAL)"
  ["45530011"]="Whiplash (USA)"
  ["4B4E0001"]="Whiteout (USA)"
  ["4B4F0008"]="Winback 2 - Project Poseidon (USA)"
  ["54540018"]="Wings Of War (USA)"
  ["4B4E0009"]="Winter X Games Snowboarding 2002 (USA)"
  ["43430014"]="Without Warning (GLO)"
  ["4356000D"]="World Championship Poker (USA)"
  ["43560010"]="World Championship Poker 2 Ft H.L (USA)"
  ["4A410007"]="World Championship Pool 2004 (USA)"
  ["434D000D"]="World Championship Snooker 2003 (PAL)"
  ["434D002A"]="World Championship Snooker 2004 (PAL)"
  ["54540087"]="World Poker Tour (USA)"
  ["544D0005"]="World Racing (USA)"
  ["544D0012"]="World Racing 2 (GLO)"
  ["5345000E"]="World Series Baseball (USA)"
  ["5345001A"]="World Series Baseball 2K3 (USA)"
  ["41560054"]="World Series Of Poker (GLO)"
  ["53450081"]="World Snooker Championship 2005 (PAL)"
  ["4B4E0027"]="World Soccer Winning Eleven 8 (USA-JPN)"
  ["4B4E002F"]="World Soccer Winning Eleven 9 (USA-JPN)"
  ["4756000B"]="World War II Combat - Iwo Jima (GLO)"
  ["47560009"]="World War II Combat - R.T.B (GLO)"
  ["5345002A"]="Worms 3D (USA)"
  ["4D4A0017"]="Worms 4 - Mayhem (USA)"
  ["53450035"]="Worms Forts - Under Siege (USA)"
  ["4C41000F"]="Wrath Unleashed (USA)"
  ["4156000A"]="Wreckless - The Yakuza Missions (USA)"
  ["4B4E0010"]="WTA Tour Tennis (USA)"
  ["5451000D"]="Wwe Raw 2 (USA)"
  ["54510024"]="Wwe Wrestlemania 21 (USA-JPN)"
  ["54510002"]="Wwf Raw (USA)"
  ["41560007"]="X-Men - Next Dimension (USA)"
  ["41560046"]="X-Men - The Official Game (GLO)"
  ["41560008"]="X-Men 2 - Wolverine's Revenge (USA)"
  ["4156001E"]="X-Men Legends (GLO)"
  ["41560047"]="X-Men Legends II -R.O.A (GLO)"
  ["4D5300C8"]="Xbox Live Arcade (GLO)"
  ["4D53005A"]="Xbox Music Mixer (USA)"
  ["41430014"]="Xgra - Extreme G Racing Assoc (USA)"
  ["4B4E0038"]="Xiaolin Showdown (USA)"
  ["55530009"]="XIII (GLO)"
  ["50430001"]="Xyanide (USA-PAL)"
  ["4B420006"]="Yager (USA)"
  ["4A570004"]="Yetisports Arctic Adventures (USA-PAL)"
  ["53550004"]="Yonenaga Kunio No Shougi Seminar (JPN)"
  ["52440001"]="Yourself!Fitness (USA)"
  ["4B4E001E"]="Yu-Gi-Oh! The Dawn Of Destiny (USA)"
  ["47450001"]="Zan Kabuki (JPN)"
  ["49470012"]="Zapper (USA)"
  ["5454008C"]="Zathura (USA)"
  ["53540001"]="Zillernet (JPN)"
)
# If mounting tmpfs on /tmp, this will eat the RAM.
TMPDIR=$(mktemp -d)
# Update attacher.xbe and Icon.jpg.
UPDATE=false
XBE=''
# Path to xbfuse binary used to mount xiso.
XBFUSE="$HERE/bin/xbfuse"

# FUNCTIONS --------------------------------------------------------------------

add_artworks() {
  # Artwork for UnleashX dashboard.
  if [[ -f $ARTWORKS ]]; then
    print 'Copying artwork.'
    mapfile -t ICON < <(7z l "$ARTWORKS" -slt | grep -oP "(?<=Path = ${1}).*?(?=$)")
    if [[ ${#ICON[@]} -eq 0 ]]; then
      NOART=true
    else
      7z e "$ARTWORKS" "${1}${ICON[0]}" -so > "$2/Icon.jpg"
    fi
  else
    NOART=true
    printf '\r\e[33m:: %s\n\e[m' 'Artwork is missing. Please install it first.'
  fi
}

clean_fname() {
  # FATX only support characters below (include space):
  # ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%&'()-.@[]^_`{}~
  local FATXCHARS='[^]0-9a-zA-Z!#$%&'\''().@^_`{}~\ [-]'
  # Replace colon with [:space:]dash.
  local CN="${1//:/ -}"
  # Is game's title contains illegal caharacters?
  if [[ $CN =~ $FATXCHARS ]]; then
    print_w 'Removing unsupported character at:'
    for (( i = 0; i < ${#CN}; i++ )) do
      c=${CN:$i:1}
      if [[ $c =~ $FATXCHARS ]]; then
        print_w "- index $i: $c"
        # Remove unsupported character.
        CN="${CN:0:$i}${CN:$((i+1)):${#CN}}"
      fi
    done
  fi
  # FATX only support 42 characters for filename (that include spaces).
  # 4 characters are reserved for file extension (.iso).
  if [[ ${#CN} -gt 37 ]]; then
    # Limit game's title to 38 characters.
    CN="${CN:0:37}"
  fi
  # Remove trailing whitespace
  shopt -s extglob
  TITLE="${CN%%+([[:space:]])}"
}

install_artworks() {
  local TID ARTDIR=${1%%.*}
  ARTDIR=${ARTDIR##*/}
  7z x -bso0 "$1" -o"$TMPDIR"
  mapfile -t COVER < <(find "$TMPDIR/$ARTDIR" -size +1k -type f -name '_resources.zip')

  for ((NUM=${#COVER[@]},i=0; i<NUM;i++)); do
    if [[ -f ${COVER[i]%/*}/detials.txt ]]; then
      TID=$(<"${COVER[i]%/*}/detials.txt")
      # Remove N/A if title doesn't have an ID.
      TID="${TID/N\/A/}"
      TID="${TID/|*\\/_}"
      # Remove carriage return.
      TID="${TID//$'\r'/}"
    else
      TID="$i"
    fi
    7z e -bso0 "${COVER[i]}" -o"$TMPDIR" '_resources/artwork/poster.jpg' -so > "$TMPDIR/${TID}.jpg"
  done
  7z a -bso0 "$ARTWORKS" "${TMPDIR}/*.jpg"
  remove_tmpdir
  print_g 'Artworks has been installed.'
}

list_output() {
  # ( $OUTPUT $ATTACH $XSPLIT $TITLE )
  printf '\r:: %s                                                 \n' "Done: $1"
  local XF=( -name "${4}.iso" )
  if $2; then
    XF=()
  elif $3; then
    XF=( -name "${4}.?.iso" )
  fi
  find "$1" -maxdepth 1 -type f "${XF[@]}" -printf '\t  %s - %P\n' | numfmt --field=2 --padding=+4 --to=si
}

patch_attach() {
  print 'Patching attacher.'
  local XBEPATCH="$TMPDIR/${1##*/}.hexpatch"
  # Adjust offset from game's default/game.xbe to attach.xbe's offset.
  local SHIFT=$((0x00010178-$3))
  # Create certificate patch.
  xxd -c1 -l 464 -s $(($3-$2)) -o "$SHIFT" "$1" > "$XBEPATCH"
  # Certificate version.
  xxd -c1 -l 4 -s $((($3-$2)+172)) -o "$SHIFT" "$1" >> "$XBEPATCH"
  cp "$HERE/bin/attach.xbe" "$4/default.xbe"
  # Patching the attacher.
  xxd -c1 -r "$XBEPATCH" "$4/default.xbe"
}

print() {
  printf '\r:: %s                                                         ' "$@"
}

# Print green text,
print_g() {
  printf '\e[32m:: %s\n\e[m' "$@"
}

# Print brown text.
print_w() {
  printf '\e[33m:: %s\n\e[m' "$@"
}

print_usage() {
  printf '%s\n' "
  ${0##*/} is a Bash script to convert ogxbox redump archive into xiso.

  Usage: ${0##*/} OPTION

  OPTION:
    -a    Install artworks (game cover) from Rocky5's Xbox Artwork Installer.
    -b    Create xiso folder to be booted from disk.
          Need Cerbios, or driveimageutils, or xiso patched M8+ BIOS to launch
          the folder.
    -D    Delete the input file after processing.
    -d    Use dd instead of extract-xiso.
          This will only remove the redump's video partition, so the output
          will be quite big. Mostly around ~7 GB.
    -h    Print this help text and exit.
    -i    Input file or directory (default to $HOME).
          If input is a directory, files inside it will be batch processed.
    -j    Join splitted xisos.
    -n    Do not split Xiso.
          Script is default to no splitting, but when -b is used it will always
          splitting the xiso if its size is bigger than 4 GB.
          With this option, xiso wont be splitted even when -b is used.
    -o    Output directory (default to $HOME).
    -p    Password to extract encrypted archive.
          Script will exit on wrong password.
          If the archives protected with different passwords, it's better to not
          use this option and input password manually when asked.
    -s    Always split output xiso into two equal size.
    -u    Update attach.xbe with game's certificate.
    -v    Print version information and exit.

  Example:
    - Install artwork.
      ${0##*/} -a -i 'Xbox Artwork Installer.zip'

    - Convert CoolGame.iso and save it into /tmp/xiso directory.
      ${0##*/} -i $HOME/CoolGame.iso -o /tmp/xiso

    - Convert game isos in Redump directory and save it into /tmp/xiso.
      ${0##*/} -i $HOME/Redump -o /tmp/xiso

    - Convert CoolGame.iso to bootable from disk format.
      ${0##*/} -bi $HOME/CoolGame.iso

    - Convert CoolGame.iso and split the output into two equal size ISOs.
      ${0##*/} -si $HOME/CoolGame.iso

    - Provide password for password protected archive.
      ${0##*/} -p secretpassword -bi $HOME/CoolGame.7z
"
  exit
}

remove_tmpdir() {
  [[ -d $TMPDIR/xbfuse ]] && umount -q "$TMPDIR/xbfuse"
  rm -r "$TMPDIR"
}

# MAIN -------------------------------------------------------------------------

# If this script run without argument.
if [[ ${#@} -eq 0 ]]; then
  print_usage
fi

while getopts ":abDdhi:jno:p:suv" opt; do
  case $opt in
    a)
      INSTART=true
    ;;
    b)
      ATTACH=true
    ;;
    D)
      REMIN=true
    ;;
    d)
      EXISO="$(command -v dd)"
    ;;
    h)
      print_usage
    ;;
    i)
      INPUT="$OPTARG"
    ;;
    j)
      JOIN=true
    ;;
    n)
      SPLIT=$((SPLIT+1))
    ;;
    o)
      OUTARG="$OPTARG"
      OUTPUT="$OPTARG"
    ;;
    p)
      PASS=true
      PASSWORD="$OPTARG"
    ;;
    s)
      SPLIT=$((SPLIT+2))
    ;;
    u)
      UPDATE=true
    ;;
    v)
      echo ':: redump2x v1.2 (2023.10.10) - written by si_kabayan'
      exit
    ;;
    \?)
      print_w "Wrong option: -$OPTARG" >&2
      exit 1
    ;;
    :)
      print_w "Option -$OPTARG need an argument." >&2
      exit 1
    ;;
  esac
done

if [[ ! -w $OUTPUT ]]; then
  print_w 'Output directory is not writeable.'
  exit
fi

if $INSTART && [[ -f $INPUT ]]; then
  install_artworks "$INPUT"
  exit
fi

# Check if the input is exist.
if [[ -d $INPUT ]]; then
  if $UPDATE || $JOIN; then
    mapfile -t XISO < <(find "$INPUT" -maxdepth 2 -type f -name "*.iso" 2>/dev/null)
    INFILE='xiso'
  else
    # Most redump archive size are larger than 4 GB.
    # So, only find *.iso, *.7z, *.zip and *.rar bigger than 4 GB.
    mapfile -t XISO < <(find "$INPUT" -maxdepth 1 -type f -size +4G \( -name "*.iso" -o -name "*.7z" -o -name "*.zip" -o -name "*.rar" \) 2>/dev/null)
    INFILE='redump'
  fi
  if [[ ${#XISO[@]} -eq 0 ]]; then
    print_w "No $INFILE files found in $INPUT."
    exit
  fi
elif [[ -f $INPUT ]]; then
  XISO=("$INPUT")
else
  print_w "${INPUT}: No such file or directory"
  rmdir "$TMPDIR"
  exit
fi

if $JOIN; then
  if [[ ${#XISO[@]} -eq 2 ]]; then
    if [[ ${XISO[0]:0:(-6)} == "${XISO[1]:0:(-6)}" ]]; then
      JOUT="${XISO[0]##*/}"
      JOUT="${JOUT:0:(-6)}"
      print_g "Joining $JOUT"
      cat "${XISO[@]}" > "$OUTPUT/${JOUT}.iso"
      list_output "$OUTPUT" "$ATTACH" "$SPLIT" "$JOUT"
    else
      print_w "Filenames are not match. Make sure it's splitted from the same xiso."
    fi
    remove_tmpdir
  else
    print_w "Expecting for 2 splitted xisos, provided with ${#XISO[@]}."
    remove_tmpdir
  fi
  if $REMIN; then
    rm "${XISO[0]}"
    rm "${XISO[1]}"
  fi
  exit
fi

for (( n = 0; n < ${#XISO[@]}; n++ )) do
  if [[ $SPLIT -gt 1 ]]; then
    XSPLIT=true
  else
    XSPLIT=false
  fi

  # xbfuse will only successfully mount first splitted xiso. Skip the latters.
  if [[ ${XISO[n]:(-6):2} == .1 ]]; then
    if [[ -f ${XISO[n]:0:(-6)}.0.iso ]]; then
      continue
    fi
  fi

  if $UPDATE; then
    print_g "Updating ${XISO[n]%/*}"
  else
    print_g "Processing ${XISO[n]}"
  fi

  # Get basename.
  FILENAME="${XISO[n]##*/}"
  FILENAME="${FILENAME%.*}"

  # Is it an archive?
  if [[ "${XISO[n]##*.}" != 'iso' ]]; then
    ARCHIVE=true
    # Grep iso's name in the archive.
    # Only assume single iso as most redump archive contain single iso.
    XISOIN="$TMPDIR/$(7z l "${XISO[n]}" -slt | grep -oP '(?<=Path = ).*?(?=.iso).iso')"
    # Is the archive encrypted?
    if [[ $(7z l "${XISO[n]}" -slt | grep -oP '(?<=Encrypted = ).*?(?=$)') = '+' ]]; then
      if $PASS; then
        7z x -bso0 -p"$PASSWORD" -o"$TMPDIR" "${XISO[n]}"
      else
        print_w 'Enter password:'
        7z x -bso0 -o"$TMPDIR" "${XISO[n]}"
      fi
    else
      7z x -bso0 -o"$TMPDIR" "${XISO[n]}"
    fi
  else
    XISOIN="${XISO[n]}"
  fi

  # TODO: extract default.xbe or game.xbe directly from xiso.
  mkdir -p "$TMPDIR/xbfuse" || exit
  "$XBFUSE" "$XISOIN" "$TMPDIR/xbfuse"

  for x in "$TMPDIR/xbfuse/"{{{d,D}efault,game}.xbe,{DEFAULT,GAME}.{XBE,xbe}}; do
    if [[ -f $x ]]; then
      XBE="$x"
      break
    fi
  done

  # Get base address.
  BASE="$(xxd -e -l 4 -s 0x104 "$XBE")"
  BASE="0x${BASE:10:8}"
  # Get certificate address.
  CERT="$(xxd -e -l 4 -s 0x118 "$XBE")"
  CERT="0x${CERT:10:8}"
  # Reverse Title ID.
  RTID=$(xxd -e -u -l 8 -s $(((CERT-BASE)+8)) "$XBE")
  RTID="${RTID:10:8}"
  # Get game's Title Name based on its Title ID.
  TITLE="${TITLENAME[$RTID]}"
  # If it's returned empty, use redump's filename as xiso's filename.
  if [[ -z "$TITLE" ]]; then
    TITLE="${FILENAME%% (*}"
    clean_fname "$TITLE"
  fi

  if $UPDATE; then
    OUTPUT=${XISO[n]%/*}
    patch_attach "$XBE" "$BASE" "$CERT" "$OUTPUT"
    add_artworks "$RTID" "$OUTPUT"
    if $NOART; then
      printf '\r:: %s\n' 'New default.xbe has been created but no artwork found.'
    else
      printf '\r:: %s\n' 'New default.xbe and Icon.jpg has been created.'
    fi
    remove_tmpdir
    continue
  fi

  # Patch attach.xbe with default/game.xbe's certificate.
  if $ATTACH; then
    OUTPUT="$OUTARG/$TITLE"
    mkdir -p "$OUTPUT"
    patch_attach "$XBE" "$BASE" "$CERT" "$OUTPUT"
    add_artworks "$RTID" "$OUTPUT"
  fi

  if [[ ${EXISO##*/} = 'extract-xiso' ]]; then
    print 'Extracting redump.'
    "$EXISO" "${EXISOARGS[@]}" "$XISOIN" -d "$OUTPUT" 1>"$TMPDIR"/extract.log
  else
    if [[ $(stat -c%s "$XISOIN") -lt 7825162240 ]]; then
      print_w 'Input size is less than 7825162240. Probably not a redump. Skipped.'
      break
    else
      print 'Removing video partition.'
      "$EXISO" if="$XISOIN" of="$OUTPUT/${FILENAME}.iso" skip=387 bs=1M status=none
    fi
  fi

  # If no output.
  if [[ ! -f $OUTPUT/${FILENAME}.iso ]]; then
    # Check if input is already an optimized xiso.
    if ! grep -q optimized "$TMPDIR"/extract.log; then
      # If it is not, then clean it up.
      if $ATTACH; then
        rm -r "$OUTPUT"
        break
      fi
    else
      print 'Copying already optimized input.'
      cp "$XISOIN" "$OUTPUT"
    fi
  fi

  if [[ "$OUTPUT/${FILENAME}.iso" != "$OUTPUT/${TITLE}.iso" ]]; then
    mv "$OUTPUT/${FILENAME}.iso" "$OUTPUT/${TITLE}.iso"
  fi

  # Rewrite xiso add ".old" extension to the original file. Revert it back.
  if $ARCHIVE; then
    rm -f "${XISOIN}"{,.old}
  else
    if [[ -f "$XISOIN".old ]]; then
      mv "$XISOIN"{.old,}
    fi
  fi

  if $REMIN; then
    rm "$INPUT"
  fi

  if [[ $SPLIT -eq 0 ]] && $ATTACH && [[ $(stat -c%s "$OUTPUT/${TITLE}.iso") -gt 4294965248 ]]; then
    XSPLIT=true
  fi

  if $XSPLIT; then
    print 'Splitting xiso.'
    # Repackinator's json has region string in its Title Name.
    # Remove this if xiso filename length is too long for FATX.
    if [[ ${#TITLENAME[$RTID]} -gt 35 ]]; then
      split -a 1 --additional-suffix=".iso" -dn 2 "$OUTPUT/${TITLE}.iso" "$OUTPUT/${TITLENAME[$RTID]% \(*}."
    else
      split -a 1 --additional-suffix=".iso" -dn 2 "$OUTPUT/${TITLE}.iso" "$OUTPUT/${TITLE:0:35}."
    fi

    rm "$OUTPUT/${TITLE}.iso"
  fi

  remove_tmpdir

  list_output "$OUTPUT" "$ATTACH" "$XSPLIT" "$TITLE"
done
